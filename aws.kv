#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import ListAdapter kivy.adapters.listadapter.ListAdapter
#:import ListItemButton kivy.uix.listview.ListItemButton
#:import main AWSApp

MainWindow:

<MainWindow>:
    list_view: list_view
    orientation: "vertical"
    cols:1
    spacing: 10
    BoxLayout:
        orientation: "vertical"
        ActionBar:
            pos_hint: {'top':1}
            ActionView:
                use_separator: True
                ActionPrevious:
                    title: 'AWS Audit'
                    with_previous: False
                ActionOverflow:
                ActionButton:
                    text: "Fetch Data"
                    on_release: root.fetchButton()
                ActionGroup:
                    text: "Plugins"
                    ActionButton:
                        text: "Load"
                        on_release: root.update()
                    ActionButton:
                        text: "Display"
                        on_release: root.display()
                    ActionButton:
                        text: "Clear"
                        on_release: root.clear()
                ActionGroup:
                    text: "Overview"
                    ActionButton:
                        text: "Build Table"
                        on_release: manager.get_screen("home").buildTable()
                ActionGroup:
                    text: 'Options'
                    ActionButton:
                        text: "Save Snapshot"
                        on_release: root.doSaveSnapshot()
                    ActionButton:
                        text: "Settings"
                        on_release: app.open_settings()

        BoxLayout:
            ListView:
                id: list_view
                adapter:
                    ListAdapter(data=root.data, cls=main.PluginsListButton)
            ListView:
                id: list_view2
                adapter:
                    ListAdapter(data=root.outData, cls=main.PluginsOutputListButton)
    Widget:
        id: separator
        size_hint_y: None
        height: 6
        canvas:
            Color:
                rgb: 1., 0., 0.
            Rectangle:
                pos: 0, separator.center_y
                size: separator.width, 2

    MyScreenManager:
        id: manager

<MyScreenManager>:
    id: "manager"
    HomeScreen:
        name: "home"
        id: home
    PluginsScreen:
        name: "plugins"

<HomeScreen>:
    tableLayout: tableLayout
    id: "home"
    orientation: "vertical"
    padding: 10
    spacing: 10
    BoxLayout:
        ScrollView:
            GridLayout:
                id: tableLayout
                cols: 4
                padding: 10
                size_hint: (1, None)
			    height: self.minimum_height

<PluginsScreen>
    id: "plugins"
    orientation: "vetical"
    padding: 10
    spacing: 10
    Label:
        text: root.text
    BoxLayout:
        size_hint_y: None
        height: "40dp"
        Button:
            text: "Home"
            on_release: root.switch_to("home")
        Button
            text: "Configured Plugins"
            on_release: root.doConfiguredPlugins()

<PopupBox>:
    pop_up_text: _pop_up_text
    pop_up_info: _pop_up_info
    size_hint: .5, .5
    auto_dismiss: False
    title: 'Status'

    BoxLayout:
        orientation: "vertical"
        Label:
            id: _pop_up_text
            text: ''
        PBar:
            id: pb
            height: '48dp'
            value: root.pb_value
        Label:
            id: _pop_up_info
            text: ''